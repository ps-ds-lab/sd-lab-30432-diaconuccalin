{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\calin\\\\Desktop\\\\uni\\\\SD\\\\Actualizat\\\\sd-lab-30432-diaconuccalin\\\\Server\\\\CampingPlatformFrontend\\\\react-api\\\\src\\\\host\\\\location\\\\DetailsLocation.js\";\nimport React from 'react';\nimport { getToken, getUser } from '../../utils/Common';\nimport DeleteLocationModal from './DeleteLocationModal';\nimport InquireLocationModal from '../../guest/InquireLocationModal';\nimport DetailsGuestModal from '../../guest/DetailsGuestModal';\n\nconst isAccepted = guestRequest => guestRequest.accepted === true;\n\nclass DetailsLocation extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      location: [],\n      guestRequests: [],\n      token: getToken(),\n      found: false\n    };\n  }\n\n  componentDidMount() {\n    var queryString = this.props.location.search;\n    let params = new URLSearchParams(queryString);\n    let id = params.get(\"id\");\n    const requestOptions = {\n      headers: {\n        'Authorization': 'Bearer ' + this.state.token\n      }\n    };\n    fetch('http://localhost:5000/api/locations/' + id, requestOptions).then(res => res.json()).then(data => {\n      this.setState({\n        location: data\n      });\n      fetch('http://localhost:5000/api/guestRequests/getByLocation/' + this.state.location.id, requestOptions).then(res => res.json()).then(data => {\n        data.forEach(element => {\n          fetch('http://localhost:5000/api/users/' + element.guestId, requestOptions).then(res => res.json()).then(data2 => {\n            element.firstName = data2.firstName;\n            element.lastName = data2.lastName;\n            element.user = data2;\n            fetch('http://localhost:5000/api/guests/' + data2.correspondingID, requestOptions).then(res => res.json()).then(data3 => {\n              element.guest = data3;\n              this.setState({\n                guestRequests: data\n              });\n              console.log(guestRequests);\n            });\n          }).catch(console.log);\n\n          if (getUser().role === \"Guest\" && element.guestId === getUser().id) {\n            this.setState({\n              found: true\n            });\n          }\n        });\n      }).catch(console.log);\n    }).catch(console.log);\n  }\n\n  render() {\n    if (getUser().role === \"Host\") {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        class: \"container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 21\n        }\n      }, \"Location details\"), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 46\n        }\n      }), /*#__PURE__*/React.createElement(\"p\", {\n        class: \"card-text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 42\n        }\n      }, \"Maximum number of guests:\"), \" \", this.state.location.maxNoGuests), /*#__PURE__*/React.createElement(\"p\", {\n        class: \"card-text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 42\n        }\n      }, \"Available days:\"), \" \", this.state.location.days && this.state.location.days.includes(\"FRI\") ? \"Friday \" : \"\", this.state.location.days && this.state.location.days.includes(\"SAT\") ? \"Saturday \" : \"\", this.state.location.days && this.state.location.days.includes(\"SUN\") ? \"Sunday\" : \"\"), /*#__PURE__*/React.createElement(\"p\", {\n        class: \"card-text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 42\n        }\n      }, \"Address:\"), \" \", this.state.location.physicalAddress), /*#__PURE__*/React.createElement(\"p\", {\n        class: \"card-text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 42\n        }\n      }, \"Description:\"), \" \", this.state.location.description), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        class: \"btn btn-primary mr-1 mt-2\",\n        onClick: () => window.location.href = \"/hosts/locationEdit?id=\" + this.state.location.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 21\n        }\n      }, \"Edit\"), /*#__PURE__*/React.createElement(DeleteLocationModal, {\n        locationID: this.state.location.id,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 26\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 31\n        }\n      }), /*#__PURE__*/React.createElement(\"p\", {\n        class: \"card-text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 42\n        }\n      }, \"Requests for this location:\")), this.state.guestRequests.map(element => /*#__PURE__*/React.createElement(\"p\", {\n        class: \"card-text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(DetailsGuestModal, {\n        guestRequestId: element.id,\n        user: element.user,\n        guest: element.guest,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 29\n        }\n      }), element.firstName, \" \", element.lastName)));\n    } else if (getUser().role === \"Guest\") {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        class: \"container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 21\n        }\n      }, \"Location details\"), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 46\n        }\n      }), /*#__PURE__*/React.createElement(\"p\", {\n        class: \"card-text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 42\n        }\n      }, \"Maximum number of guests:\"), \" \", this.state.location.maxNoGuests), /*#__PURE__*/React.createElement(\"p\", {\n        class: \"card-text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 42\n        }\n      }, \"Available days:\"), \" \", this.state.location.days && this.state.location.days.includes(\"FRI\") ? \"Friday \" : \"\", this.state.location.days && this.state.location.days.includes(\"SAT\") ? \"Saturday \" : \"\", this.state.location.days && this.state.location.days.includes(\"SUN\") ? \"Sunday\" : \"\"), /*#__PURE__*/React.createElement(\"p\", {\n        class: \"card-text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 42\n        }\n      }, \"Address:\"), \" \", this.state.location.physicalAddress), /*#__PURE__*/React.createElement(\"p\", {\n        class: \"card-text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 42\n        }\n      }, \"Description:\"), \" \", this.state.location.description), /*#__PURE__*/React.createElement(InquireLocationModal, {\n        locationID: this.state.location.id,\n        disabled: this.state.found ? \"true\" : \"false\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 26\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 31\n        }\n      }), /*#__PURE__*/React.createElement(\"p\", {\n        class: \"card-text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"b\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 42\n        }\n      }, \"Attending guests:\")), this.state.guestRequests.filter(isAccepted).map(element => /*#__PURE__*/React.createElement(\"p\", {\n        class: \"card-text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 25\n        }\n      }, element.firstName, \" \", element.lastName)));\n    }\n  }\n\n}\n\nexport default DetailsLocation;","map":{"version":3,"sources":["C:/Users/calin/Desktop/uni/SD/Actualizat/sd-lab-30432-diaconuccalin/Server/CampingPlatformFrontend/react-api/src/host/location/DetailsLocation.js"],"names":["React","getToken","getUser","DeleteLocationModal","InquireLocationModal","DetailsGuestModal","isAccepted","guestRequest","accepted","DetailsLocation","Component","state","location","guestRequests","token","found","componentDidMount","queryString","props","search","params","URLSearchParams","id","get","requestOptions","headers","fetch","then","res","json","data","setState","forEach","element","guestId","data2","firstName","lastName","user","correspondingID","data3","guest","console","log","catch","role","render","maxNoGuests","days","includes","physicalAddress","description","window","href","map","filter"],"mappings":"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","sourcesContent":["import React from 'react';\r\n\r\nimport { getToken, getUser } from '../../utils/Common';\r\nimport DeleteLocationModal from './DeleteLocationModal';\r\nimport InquireLocationModal from '../../guest/InquireLocationModal'\r\nimport DetailsGuestModal from '../../guest/DetailsGuestModal'\r\n\r\nconst isAccepted = (guestRequest) => guestRequest.accepted === true;\r\n\r\nclass DetailsLocation extends React.Component {\r\n    state = {\r\n        location: [],\r\n        guestRequests: [],\r\n        token: getToken(),\r\n        found: false\r\n    }\r\n\r\n    componentDidMount() {\r\n        var queryString = this.props.location.search;\r\n        let params = new URLSearchParams(queryString);\r\n        let id = params.get(\"id\");\r\n        \r\n        const requestOptions = {\r\n            headers: { 'Authorization': 'Bearer ' + this.state.token }\r\n        };\r\n\r\n        fetch('http://localhost:5000/api/locations/' + id, requestOptions)\r\n        .then(res => res.json())\r\n        .then((data) => {\r\n            this.setState({ location: data });\r\n\r\n            fetch('http://localhost:5000/api/guestRequests/getByLocation/' + this.state.location.id, requestOptions)\r\n            .then(res => res.json())\r\n            .then((data) => {\r\n                data.forEach(element => {\r\n                    fetch('http://localhost:5000/api/users/' + element.guestId, requestOptions)\r\n                    .then(res => res.json())\r\n                    .then((data2) => {\r\n                        element.firstName = data2.firstName;\r\n                        element.lastName = data2.lastName;\r\n                        element.user = data2;\r\n\r\n                        fetch('http://localhost:5000/api/guests/' + data2.correspondingID, requestOptions)\r\n                        .then(res => res.json())\r\n                        .then((data3) => {\r\n                            element.guest = data3;\r\n                            this.setState({ guestRequests : data });\r\n                            console.log(guestRequests);\r\n                        })\r\n                    })\r\n                    .catch(console.log);\r\n                    \r\n                    if(getUser().role === \"Guest\" && element.guestId === getUser().id) {\r\n                        this.setState({ found: true });\r\n                    }\r\n                });\r\n            })\r\n            .catch(console.log);\r\n        })\r\n        .catch(console.log)\r\n    }\r\n\r\n    render() {\r\n        if(getUser().role === \"Host\") {\r\n            return(\r\n                <div class=\"container\">\r\n                    <h1>Location details</h1><br/>\r\n                    <p class=\"card-text\"><b>Maximum number of guests:</b> {this.state.location.maxNoGuests}</p>\r\n                    <p class=\"card-text\"><b>Available days:</b> {this.state.location.days && this.state.location.days.includes(\"FRI\") ? \"Friday \" : \"\"}{this.state.location.days && this.state.location.days.includes(\"SAT\") ? \"Saturday \" : \"\"}{this.state.location.days && this.state.location.days.includes(\"SUN\") ? \"Sunday\" : \"\"}</p>\r\n                    <p class=\"card-text\"><b>Address:</b> {this.state.location.physicalAddress}</p>\r\n                    <p class=\"card-text\"><b>Description:</b> {this.state.location.description}</p>\r\n    \r\n                    <button type=\"button\" class=\"btn btn-primary mr-1 mt-2\" onClick={()=>window.location.href = \"/hosts/locationEdit?id=\" + this.state.location.id}>Edit</button>\r\n                    <DeleteLocationModal locationID={ this.state.location.id }/>\r\n\r\n                    <br/><br/><br/>\r\n                    <p class=\"card-text\"><b>Requests for this location:</b></p>\r\n                    {this.state.guestRequests.map((element) => (\r\n                        <p class=\"card-text\">\r\n                            <DetailsGuestModal guestRequestId={element.id} user={element.user} guest={element.guest}/>\r\n                            {element.firstName} {element.lastName}\r\n                        </p>\r\n                    ))}\r\n                </div>\r\n            )\r\n        } else if(getUser().role === \"Guest\") {\r\n            return(\r\n                <div class=\"container\">\r\n                    <h1>Location details</h1><br/>\r\n                    <p class=\"card-text\"><b>Maximum number of guests:</b> {this.state.location.maxNoGuests}</p>\r\n                    <p class=\"card-text\"><b>Available days:</b> {this.state.location.days && this.state.location.days.includes(\"FRI\") ? \"Friday \" : \"\"}{this.state.location.days && this.state.location.days.includes(\"SAT\") ? \"Saturday \" : \"\"}{this.state.location.days && this.state.location.days.includes(\"SUN\") ? \"Sunday\" : \"\"}</p>\r\n                    <p class=\"card-text\"><b>Address:</b> {this.state.location.physicalAddress}</p>\r\n                    <p class=\"card-text\"><b>Description:</b> {this.state.location.description}</p>\r\n                    \r\n                    <InquireLocationModal locationID={ this.state.location.id } disabled={ this.state.found ? \"true\" : \"false\" }/>\r\n                    \r\n                    <br/><br/><br/>\r\n                    <p class=\"card-text\"><b>Attending guests:</b></p>\r\n                    {this.state.guestRequests.filter(isAccepted).map((element) => (\r\n                        <p class=\"card-text\">{element.firstName} {element.lastName}</p>\r\n                    ))}\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\nexport default DetailsLocation;"]},"metadata":{},"sourceType":"module"}