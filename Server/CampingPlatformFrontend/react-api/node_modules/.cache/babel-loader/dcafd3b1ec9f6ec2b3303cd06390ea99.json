{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\calin\\\\Desktop\\\\uni\\\\SD\\\\Actualizat\\\\sd-lab-30432-diaconuccalin\\\\Server\\\\CampingPlatformFrontend\\\\react-api\\\\src\\\\guest\\\\InquireLocationModal.js\";\nimport React, { useState } from 'react';\nimport Modal from 'react-bootstrap/Modal';\nimport axios from 'axios';\nimport { getUser, getToken } from '../utils/Common';\nimport * as signalR from '@microsoft/signalr';\n\nfunction InquireLocationModal({\n  locationID: locationid,\n  disabled,\n  ...rest\n}) {\n  const [show, setShow] = useState(false);\n\n  const handleClose = () => setShow(false);\n\n  const handleShow = () => setShow(true);\n\n  const inquireLocation = () => {\n    axios.post('http://localhost:5000/api/guestRequests', {\n      guestId: getUser().id,\n      locationId: locationid\n    }, {\n      'headers': {\n        'Authorization': 'Bearer ' + getToken()\n      }\n    }).then(response => {\n      axios.get(\"http://localhost:5000/api/locations/\" + locationid, {\n        'headers': {\n          'Authorization': 'Bearer ' + getToken()\n        }\n      }).then(response2 => {\n        console.log(response2);\n        var connection = new signalR.HubConnectionBuilder().withUrl(\"http://localhost:5000/notifications\", {\n          skipNegotiation: true,\n          transport: signalR.HttpTransportType.WebSockets\n        }).build();\n        connection.start().then(function () {\n          connection.invoke(\"SendNotification\", \"TEST\").catch(function (err) {\n            return console.error(err.toString());\n          }); //handleClose();\n          //window.location.href = \"/\";\n        }).catch(function (err) {\n          return console.error(err.toString());\n        });\n      }).catch(error => {\n        console.log(error);\n      });\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    class: disabled === \"true\" ? \"btn btn-primary mr-1 mt-2 disabled\" : \"btn btn-primary mr-1 mt-2\",\n    onClick: disabled === \"true\" ? handleClose : handleShow,\n    id: \"sendInquire\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }\n  }, disabled === \"true\" ? \"You have already solicited this place\" : \"I would like to stay in this place\"), /*#__PURE__*/React.createElement(Modal, {\n    show: show,\n    onHide: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 17\n    }\n  }, \"Request confirmation\")), /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  }, \"If you confirm the request, we will send the information you provided about yourself (your full name, your profile picture and the description you provided about yourself).\", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 197\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 202\n    }\n  }), \"If the host that owns the location accepts, they will also get access to your contact information (email and telephone number) and you will get access to their information (name, telephone number and email address).\", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 105\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 110\n    }\n  }), \"From that point on, it is your responsibility to contact each other and to establish further details about your accomodation.\"), /*#__PURE__*/React.createElement(Modal.Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    class: \"btn btn-primary mr-1 mt-2\",\n    onClick: inquireLocation,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 17\n    }\n  }, \"Confirm request\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    class: \"btn btn-secondary mr-1 mt-2\",\n    onClick: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 17\n    }\n  }, \"Cancel\"))));\n}\n\nexport default InquireLocationModal;","map":{"version":3,"sources":["C:/Users/calin/Desktop/uni/SD/Actualizat/sd-lab-30432-diaconuccalin/Server/CampingPlatformFrontend/react-api/src/guest/InquireLocationModal.js"],"names":["React","useState","Modal","axios","getUser","getToken","signalR","InquireLocationModal","locationID","locationid","disabled","rest","show","setShow","handleClose","handleShow","inquireLocation","post","guestId","id","locationId","then","response","get","response2","console","log","connection","HubConnectionBuilder","withUrl","skipNegotiation","transport","HttpTransportType","WebSockets","build","start","invoke","catch","err","error","toString"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport Modal from 'react-bootstrap/Modal';\r\nimport axios from 'axios';\r\nimport { getUser, getToken } from '../utils/Common';\r\nimport * as signalR from '@microsoft/signalr';\r\n\r\nfunction InquireLocationModal({ locationID: locationid, disabled, ...rest }) {\r\n    const [show, setShow] = useState(false);\r\n  \r\n    const handleClose = () => setShow(false);\r\n    const handleShow = () => setShow(true);\r\n\r\n    const inquireLocation = () => {\r\n        axios\r\n            .post('http://localhost:5000/api/guestRequests',\r\n                {\r\n                    guestId: getUser().id,\r\n                    locationId: locationid\r\n                },\r\n                { 'headers':\r\n                    { 'Authorization' : 'Bearer ' + getToken() }})\r\n            .then(response => {\r\n                axios.get(\"http://localhost:5000/api/locations/\" + locationid,\r\n                { 'headers':\r\n                    { 'Authorization' : 'Bearer ' + getToken() }})\r\n                .then(response2 => {\r\n                    console.log(response2);\r\n\r\n                    var connection = new signalR.HubConnectionBuilder().withUrl(\"http://localhost:5000/notifications\",\r\n                    {\r\n                        skipNegotiation: true,\r\n                        transport: signalR.HttpTransportType.WebSockets\r\n                    }).build();\r\n\r\n                    connection.start().then(function () {\r\n                        connection.invoke(\"SendNotification\", \"TEST\").catch(function (err) {\r\n                          return console.error(err.toString());\r\n                        });\r\n                        \r\n                        //handleClose();\r\n                        //window.location.href = \"/\";\r\n                      }).catch(function (err) {\r\n                        return console.error(err.toString());\r\n                    });\r\n                })\r\n                .catch(error => {\r\n                    console.log(error);\r\n                })\r\n            })\r\n            .catch(error => {\r\n                console.log(error);\r\n            });\r\n    };\r\n  \r\n    return (\r\n      <>\r\n        <button type=\"button\" class={disabled === \"true\" ? \"btn btn-primary mr-1 mt-2 disabled\" : \"btn btn-primary mr-1 mt-2\"} onClick={disabled === \"true\" ? handleClose : handleShow} id=\"sendInquire\">{disabled === \"true\" ? \"You have already solicited this place\" : \"I would like to stay in this place\"}</button>\r\n  \r\n        <Modal show={show} onHide={handleClose}>\r\n            <Modal.Header closeButton>\r\n                <Modal.Title>Request confirmation</Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>If you confirm the request, we will send the information you provided about yourself (your full name, your profile picture and the description you provided about yourself).<br/><br/>\r\n                If the host that owns the location accepts, they will also get access to your contact information (email and telephone number) \r\n                and you will get access to their information (name, telephone number and email address).<br/><br/>\r\n                From that point on, it is your responsibility to contact each other and to establish further details about your accomodation.\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n                <button type=\"button\" class=\"btn btn-primary mr-1 mt-2\" onClick={inquireLocation} >Confirm request</button>\r\n                <button type=\"button\" class=\"btn btn-secondary mr-1 mt-2\" onClick={handleClose} >Cancel</button>\r\n            </Modal.Footer>\r\n        </Modal>\r\n      </>\r\n    );\r\n}\r\n\r\nexport default InquireLocationModal;"]},"metadata":{},"sourceType":"module"}